@model List<PROG6212_Part2.Models.Claim>
@{
    var email = Context.Session.GetString("Email");
    var lecturer = PROG6212_Part2.Controllers.LecturerController._lecturers
        .FirstOrDefault(l => l.Email.ToLower() == email?.ToLower());
}

<h2>Your Claims</h2>

@if (lecturer != null)
{
    <p><strong>Logged in as:</strong> @lecturer.FullName (@lecturer.Email)</p>
    <p><strong>Department:</strong> @lecturer.Department</p>
}

@if (!Model.Any())
{
    <div class="alert alert-info mt-4">No claims submitted yet.</div>
}
else
{
    foreach (var claim in Model)
    {
        <div class="card mb-3">
            <div class="card-body">
                <p><strong>Month:</strong> @claim.Month</p>
                <p><strong>Course:</strong> @claim.CourseCode - @claim.CourseTitle</p>
                <p><strong>Hours Worked:</strong> @claim.HoursWorked</p>
                <p><strong>Rate:</strong> R@claim.Rate</p>
                <p><strong>Total Amount:</strong> R@claim.TotalAmount.ToString("F2")</p>
                <p><strong>Status:</strong> @claim.Status</p>
                <a asp-controller="Claim" asp-action="Download" asp-route-id="@claim.ClaimID" class="btn btn-sm btn-outline-primary">Download</a>
            </div>
        </div>
    }
}
